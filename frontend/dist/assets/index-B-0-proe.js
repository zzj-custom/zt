import{c as z,r as T,u as D}from"./index-DHMX01H1.js";import{L}from"./App-C6ci30go.js";import{m as b,af as M,a3 as w,x as m,o as _,e as k,w as t,b as a,a6 as U,d as n,X as N,a as v,a5 as B,B as $,h,W as C,_ as j,G as q,a4 as F,a1 as H,ai as P,t as p,D as A,aj as x,a7 as g,ak as I,aa as E,c as G,K}from"./index-D7yCSS-M.js";const S={class:"my-3 d-flex justify-center"},W={class:"d-flex justify-center"},X=b({__name:"search",props:{modelValue:{type:Array},modelModifiers:{}},emits:["update:modelValue"],setup(f){const l=M({loading:!1,url:""}),d=w(f,"modelValue"),o=m({url:{required:z.withMessage("视频地址必须填写",T)}}),i=D(o,l),V=async()=>{if(await i.value.$validate(),i.value.$invalid){console.error("表单验证失败");return}l.loading=!0;try{const u=await L(l.url);u.code===0?d.value=u.result:console.error(u.msg)}catch(u){console.error("搜索过程中发生错误:",u)}finally{l.loading=!1}};return(u,r)=>(_(),k(q,{class:"mx-auto",hover:""},{default:t(()=>[a(N,null,{default:t(()=>[a(U,null,{default:t(()=>[n(" 搜索地址 ")]),_:1})]),_:1}),a(j,{class:"text-center"},{default:t(()=>[v("div",null,[v("div",S,[a(B,{modelValue:l.url,"onUpdate:modelValue":r[0]||(r[0]=e=>l.url=e),"max-width":"50%",loading:l.loading,"append-inner-icon":"mdi-magnify",density:"compact",label:"请填写需要下载的视频地址",variant:"solo","error-messages":$(i).url.$errors.map(e=>e.$message),"single-line":"","onClick:appendInner":V},null,8,["modelValue","loading","error-messages"])]),v("div",W,[a(h,{density:"compact",variant:"text"},{default:t(()=>[n("目前允许下载视频包括：")]),_:1}),a(h,{density:"compact",color:"cyan",label:""},{default:t(()=>[a(C,{icon:"mdi-twitter",start:""}),n(" New Tweets ")]),_:1})])])]),_:1})]),_:1}))}}),J=["colspan"],O=b({__name:"list",props:{modelValue:{type:Array},modelModifiers:{}},emits:["update:modelValue"],setup(f){const l=m(""),d=w(f,"modelValue"),o=m([{title:"名称",key:"title"},{title:"网站地址",key:"site",sortable:!1},{title:"类型",key:"type",sortable:!1}]),i=m([{title:"清晰度",key:"quality"},{title:"大小",key:"size"},{title:"格式",key:"ext",sortable:!1}]),V=m([]);return(u,r)=>(_(),k(q,{hover:""},{default:t(()=>[a(U,{class:"d-flex align-center pe-2"},{default:t(()=>[a(C,{color:"primary",icon:"mdi-video"}),n("  视频列表 "),a(F),a(B,{modelValue:l.value,"onUpdate:modelValue":r[0]||(r[0]=e=>l.value=e),density:"compact",label:"Search","prepend-inner-icon":"mdi-magnify",variant:"solo-filled",flat:"","hide-details":"","single-line":""},null,8,["modelValue"])]),_:1}),a(H),a(g,{search:l.value,"onUpdate:search":r[1]||(r[1]=e=>l.value=e),selected:V.value,"onUpdate:selected":r[2]||(r[2]=e=>V.value=e),items:d.value,headers:o.value,"item-value":"name","show-expand":"","show-select":""},{"item.title":t(({item:e})=>[a(P,{text:e.title},{activator:t(({props:s})=>[v("span",A({class:"text-truncate overflow-hidden"},s),p(e.title),17)]),_:2},1032,["text"])]),"header.data-table-select":t(({allSelected:e,selectAll:s,someSelected:c})=>[a(x,{indeterminate:c&&!e,"model-value":e,color:"primary","onUpdate:modelValue":y=>s(!e)},null,8,["indeterminate","model-value","onUpdate:modelValue"])]),"item.data-table-select":t(({internalItem:e,isSelected:s,toggleSelect:c})=>[a(x,{"model-value":s(e),color:"primary","onUpdate:modelValue":y=>c(e)},null,8,["model-value","onUpdate:modelValue"])]),"item.site":t(({item:e})=>[a(h,{density:"compact",color:"cyan",target:"_blank",href:e.url,label:""},{default:t(()=>[a($(I),{class:"icon"}),n(" "+p(e.site),1)]),_:2},1032,["href"])]),"expanded-row":t(({item:e})=>[v("td",{colspan:o.value.length-1},[a(g,{headers:i.value,items:e.streams,"select-strategy":"single","hide-default-footer":"","show-select":""},{"item.data-table-select":t(({internalItem:s,isSelected:c,toggleSelect:y})=>[a(x,{"model-value":c(s),color:"primary","onUpdate:modelValue":Q=>y(s)},null,8,["model-value","onUpdate:modelValue"])]),"item.quality":t(({item:s})=>[n(p(s.quality),1)]),"item.size":t(({item:s})=>[n(p((s.size/1048576).toFixed(2))+" MB ",1)]),"item.ext":t(({item:s})=>[n(p(s.ext),1)]),_:2},1032,["headers","items"])],8,J)]),_:1},8,["search","selected","items","headers"])]),_:1}))}}),ee=b({__name:"index",setup(f){const l=m([{url:"https://www.bilibili.com/video/BV1VH4y1w7De",site:"哔哩哔哩 bilibili.com",title:"温庭筠：我拼尽了全力，还是过不好自己这一生",type:"video",streams:[{id:"32-12",quality:"清晰 480P hev1.1.6.L120.90",size:77059525,ext:"mp4"}],caption:{danmaku:{url:"https://comment.bilibili.com/1597996331.xml",size:0,ext:"xml"}}},{url:"https://www.bilibili.com/video/BV1VH4y1w7De",site:"哔哩哔哩 bilibili.com",title:"温庭筠：我拼尽了全力，还是过不好自己这一生",type:"video",streams:[{id:"32-12",quality:"清晰 480P hev1.1.6.L120.90",size:77059525,ext:"mp4"}],caption:{danmaku:{url:"https://comment.bilibili.com/1597996331.xml",size:0,ext:"xml"}}}]);return E(l,d=>{console.log(d),d!==l.value&&(l.value=[...d])}),(d,o)=>(_(),G(K,null,[a(X,{modelValue:l.value,"onUpdate:modelValue":o[0]||(o[0]=i=>l.value=i)},null,8,["modelValue"]),a(O,{class:"mt-3",modelValue:l.value,"onUpdate:modelValue":o[1]||(o[1]=i=>l.value=i)},null,8,["modelValue"])],64))}});export{ee as default};
