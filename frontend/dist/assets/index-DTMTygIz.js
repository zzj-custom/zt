import{P,V as N,C as D,a as F,b as T}from"./App-C6ci30go.js";import{m as k,x as y,a3 as h,v as B,o as _,e as x,w as l,b as a,W as E,d,a4 as A,a5 as L,a6 as M,a1 as j,G as C,z,a as v,t as U,V as m,a7 as G,a8 as K,X as R,a9 as W,D as X,_ as w,aa as b,Y,Z as S,ab as Z,ac as q,a2 as H,c as J,ad as O,B as Q,K as ee}from"./index-D7yCSS-M.js";import{u as te}from"./useAppStoe-CplLL7bs.js";const ae={class:"d-flex justify-center gap-2"},le={name:"NeListComponent"},oe=k({...le,props:{modelValue:{type:Array,default:[]},modelModifiers:{}},emits:["update:modelValue"],setup(p){const s=y(""),n=h(p,"modelValue"),i=y([{title:"文件名称",key:"name"},{title:"音乐图片",key:"albumPic"},{title:"音乐名称",key:"musicName"},{title:"音乐ID",key:"musicId"},{title:"时长",key:"duration"},{title:"操作",key:"format",width:"100px"}]),r=B(()=>t=>{t=Math.floor(t/1e3);const e=Math.floor(t/3600),o=Math.floor(t%3600/60),V=t%60,g=e.toString().padStart(2,"0"),$=o.toString().padStart(2,"0"),I=V.toString().padStart(2,"0");return e>0?`${g}:${$}:${I}`:`${$}:${I}`}),c=t=>{const e=n.value.indexOf(t);if(e>-1){const o=[...n.value];o.splice(e,1),n.value=o}},f=async t=>{try{const e=[{flag:t.flag,outPath:"",pType:1}],o=await P(e);if(o.code===0){const V=o.result[0];n.value=n.value.map(g=>(g.flag===V.flag&&(g.status=2),g))}}catch(e){console.error("Error uploading files:",e)}},u=async t=>{try{(await N(t.flag)).code===0&&console.log("查看成功")}catch(e){console.error("Error uploading files:",e)}};return(t,e)=>(_(),x(C,{hover:""},{default:l(()=>[a(M,{class:"d-flex align-center pe-2"},{default:l(()=>[a(E,{color:"primary",icon:"mdi-file"}),d("   文件列表 "),a(A),a(L,{modelValue:s.value,"onUpdate:modelValue":e[0]||(e[0]=o=>s.value=o),density:"compact",label:"Search","prepend-inner-icon":"mdi-magnify",variant:"solo-filled",flat:"","hide-details":"","single-line":""},null,8,["modelValue"])]),_:1}),a(j),a(G,{search:s.value,"onUpdate:search":e[1]||(e[1]=o=>s.value=o),items:n.value,"onUpdate:items":e[2]||(e[2]=o=>n.value=o),headers:i.value},{"item.albumPic":l(({item:o})=>[a(C,{class:"my-2",elevation:"2",rounded:"",width:"64"},{default:l(()=>[a(z,{src:o.albumPic,"aspect-ratio":"1/1"},null,8,["src"])]),_:2},1024)]),"item.duration":l(({item:o})=>[v("p",null,U(r.value(o.duration)),1)]),"item.format":l(({item:o})=>[v("div",ae,[o.status===1?(_(),x(m,{key:0,density:"comfortable",onClick:V=>f(o),class:"bg-primary"},{default:l(()=>[d("提取")]),_:2},1032,["onClick"])):(_(),x(m,{key:1,density:"comfortable",onClick:V=>u(o),class:"bg-info"},{default:l(()=>[d("查看")]),_:2},1032,["onClick"])),a(m,{density:"comfortable",class:"bg-error",onClick:V=>c(o)},{default:l(()=>[d("删除")]),_:2},1032,["onClick"])])]),_:1},8,["search","items","headers"])]),_:1}))}}),se={class:"d-flex justify-center my-3 gap-3"},re=v("p",{class:"mb-0"},"Allowed NCM File. Max size of 30M",-1),ne={name:"NeUpload"},ue=k({...ne,props:{modelValue:{type:Array},modelModifiers:{}},emits:["update:modelValue"],setup(p){const s=h(p,"modelValue"),n=async()=>{try{const r=await D();r.code===0&&(s.value=[{...r.result}])}catch(r){console.error("Error uploading files:",r)}},i=async()=>{try{const r=await F();r.code===0&&(s.value=[...r.result])}catch(r){console.error("Error uploading files:",r)}};return(r,c)=>(_(),x(C,{class:"mx-auto",hover:""},{default:l(()=>[a(R,null,{default:l(()=>[a(M,null,{default:l(()=>[d(" 文件上传 ")]),_:1}),a(K,null,{default:l(()=>[d(" 选择你需要转换的网易云文件 ")]),_:1})]),_:1}),a(w,{class:"text-center"},{default:l(()=>[v("div",null,[v("div",se,[a(m,{class:"bg-primary",onClick:n},{default:l(()=>[d("选择文件")]),_:1}),a(m,{class:"bg-primary",onClick:i},{default:l(()=>[d("选择目录")]),_:1}),a(W,null,{default:l(({isHovering:f,props:u})=>[a(m,X(u,{class:[{"on-hover":f,"bg-error":f},"text-none"],color:f?"undeinfed":"error",variant:"outlined",onClick:c[0]||(c[0]=()=>{s.value=[]})}),{default:l(()=>[d("重置文件")]),_:2},1040,["class","color"])]),_:1})]),re])]),_:1})]),_:1}))}}),ie={class:"px-3"},ce=v("p",null,"当前正在处理中！",-1),de=v("p",null,"请在处理完成后再进行此操作。",-1),fe={name:"NeFooter"},pe=k({...fe,props:{selectedItem:{type:Number},selectedItemModifiers:{},proc:{type:Number,default:1},procModifiers:{},outPath:{type:String},outPathModifiers:{}},emits:["update:selectedItem","update:proc","update:outPath"],setup(p){const s=[{title:"与源文件夹相同",value:1},{title:"自定义文件夹",value:2}],n=h(p,"selectedItem"),i=h(p,"proc"),r=h(p,"outPath"),c=y(!1);b(n,async t=>{if(t===2)try{const e=await T();r.value=e.result}catch(e){console.log(e)}});const f=()=>{i.value===2?c.value=!0:i.value=2},u=()=>{c.value=!1,i.value=1};return(t,e)=>(_(),x(C,null,{default:l(()=>[a(w,{class:"text-center"},{default:l(()=>[v("div",ie,[a(Y,{justify:"space-between"},{default:l(()=>[a(S,{cols:"3"},{default:l(()=>[a(Z,{modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=o=>n.value=o),items:s,density:"compact","item-title":"title","item-value":"value","prepend-inner-icon":"mdi-folder",variant:"solo-filled",placeholder:"请选择需要保存的文件夹","bg-color":"primary","item-color":"primary","hide-details":""},null,8,["modelValue"])]),_:1}),a(S,{cols:"2"},{default:l(()=>[a(m,{onClick:f,class:"bg-error",variant:"flat"},{default:l(()=>[d(U(i.value===1?"全部提取":"结束任务"),1)]),_:1}),a(q,{"max-width":"300",modelValue:c.value,"onUpdate:modelValue":e[1]||(e[1]=o=>c.value=o)},{default:l(()=>[a(C,{title:"注意"},{default:l(()=>[a(w,{class:"text-center"},{default:l(()=>[ce,de]),_:1}),a(H,null,{default:l(()=>[a(m,{text:"确定",class:"bg-primary",onClick:u})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})])]),_:1})]),_:1}))}}),Ve=k({__name:"index",setup(p){const s=y([]),n=y(1),i=y(""),r=y(1),c=te();b(i,u=>{u!==i.value&&(i.value=u)}),b(s,u=>{u!==s.value&&(s.value=[...u])}),b(r,u=>{if(u===2){const t=[];for(const e of s.value)t.push({flag:e.flag,outPath:i.value,pType:n.value});f(t)}});const f=async u=>{try{(await P(u)).code===0&&(s.value=s.value.map(e=>({...e,status:2})))}catch(t){console.error("Error uploading files:",t)}};return(u,t)=>(_(),J(ee,null,[a(ue,{modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=e=>s.value=e)},null,8,["modelValue"]),a(oe,{modelValue:s.value,"onUpdate:modelValue":t[1]||(t[1]=e=>s.value=e),class:"mt-3"},null,8,["modelValue"]),a(pe,{elevation:"0",class:O(Q(c).getDrawer()?"fixed-footer":"tf"),selectedItem:n.value,"onUpdate:selectedItem":t[2]||(t[2]=e=>n.value=e),proc:r.value,"onUpdate:proc":t[3]||(t[3]=e=>r.value=e),"out-path":i.value,"onUpdate:outPath":t[4]||(t[4]=e=>i.value=e)},null,8,["class","selectedItem","proc","out-path"])],64))}});export{Ve as default};
